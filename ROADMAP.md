# Roadmap

이 문서는 템플릿의 단계별 확장 전략과 아키텍처를 설명합니다.

## 핵심 원칙

1. **프론트엔드 코드 변경 없음** - 환경 변수만 변경하여 백엔드 전환
2. **추상화된 API 계층** - 인프라와 무관하게 동일한 인터페이스
3. **점진적 확장** - 필요에 따라 단계별로 복잡도 증가

---

## Stage 1: MSW 모킹 (현재)

**목적**: 백엔드 없이 브라우저에서 풀스택 개발

```
┌─────────────────────────────────────────┐
│     Frontend (React + Vite)             │
│  ┌───────────────────────────────────┐  │
│  │  MSW Worker + IndexedDB           │  │
│  │  - 브라우저 내 API 처리            │  │
│  │  - 데이터 영구 저장 (새로고침 유지)  │  │
│  │  - Zod 스키마 검증                 │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
```

**설정**:
```bash
VITE_API_MODE=mock
```

**특징**:
- 서버 설정 불필요, 즉시 개발 시작
- IndexedDB로 데이터 영구 저장
- 실제 백엔드와 동일한 API 응답 형식

**사용 시나리오**:
- 프로토타이핑
- UI/UX 개발
- 프론트엔드 단독 개발

---

## Stage 2: 단일 백엔드

**목적**: 실제 백엔드와 데이터베이스로 전환

```
┌─────────────────────────────────────────┐
│     Frontend (React + Vite)             │
│  ┌───────────────────────────────────┐  │
│  │  Vite Dev Proxy                   │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
              │ HTTP /api/*
              ▼
┌─────────────────────────────────────────┐
│     Backend (FastAPI)                   │
│  ┌───────────────────────────────────┐  │
│  │  Prisma ORM                       │  │
│  └───────────────────────────────────┘  │
│              │                          │
│  ┌───────────────────────────────────┐  │
│  │  Database (PostgreSQL)            │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
```

**설정**:
```bash
VITE_API_MODE=real
VITE_API_BASE_URL=http://localhost:8000
```

**전환 절차**:
1. FastAPI 백엔드 프로젝트 생성
2. Prisma 스키마 작성 (기존 Zod 스키마 기반)
3. 데이터베이스 설정 및 마이그레이션
4. 환경 변수 변경
5. 프론트엔드 재시작

**사용 시나리오**:
- MVP 배포
- 소규모 프로젝트 운영
- 통합 테스트

---

## Stage 3: MSA 구조

**목적**: 마이크로서비스 아키텍처로 확장

```
┌─────────────────────────────────────────┐
│     Frontend (Static Files)             │
└─────────────────────────────────────────┘
              │ HTTPS
              ▼
┌─────────────────────────────────────────┐
│     nginx (리버스 프록시)                │
│  /api/auth   → auth-service:8001        │
│  /api/users  → user-service:8002        │
│  /api/items  → item-service:8003        │
└─────────────────────────────────────────┘
        │           │           │
        ▼           ▼           ▼
   ┌────────┐  ┌────────┐  ┌────────┐
   │  Auth  │  │  User  │  │  Item  │
   │ :8001  │  │ :8002  │  │ :8003  │
   └────────┘  └────────┘  └────────┘
```

**설정**:
```bash
VITE_API_MODE=real
VITE_API_BASE_URL=https://yourdomain.com
```

**특징**:
- 서비스별 독립 배포/스케일링
- SSL/TLS 종료 (nginx)
- 로드 밸런싱

**사용 시나리오**:
- 대규모 프로젝트
- 팀별 독립 개발
- 서비스별 스케일링 필요

---

## 백엔드 기술 스택 (권장)

### FastAPI + Prisma (Python)

```
backend/
├── app/
│   ├── main.py          # FastAPI 엔트리
│   ├── routes/          # 라우터
│   ├── schemas/         # Pydantic 모델
│   ├── services/        # 비즈니스 로직
│   └── db.py            # Prisma 클라이언트
├── prisma/
│   └── schema.prisma    # DB 스키마
└── requirements.txt
```

### 타입 동기화 전략

```
Prisma Schema (단일 소스)
    │
    ├─→ Zod Schema (자동 생성) → 프론트엔드 타입
    │
    ├─→ Prisma Client → 백엔드 DB 접근
    │
    └─→ Pydantic Model → FastAPI 응답
```

**장점**:
- Prisma 스키마가 모든 타입의 단일 소스
- 실제 DB 없이도 Zod 스키마 자동 생성 가능
- 스키마 변경 시 자동 동기화

---

## 전환 체크리스트

### Stage 1 → Stage 2

- [ ] FastAPI 백엔드 프로젝트 생성
- [ ] Prisma 스키마 작성
- [ ] 데이터베이스 설정
- [ ] 마이그레이션 실행
- [ ] `.env`에서 `VITE_API_MODE=real` 설정
- [ ] `VITE_API_BASE_URL` 설정
- [ ] API 응답 형식 일치 확인

### Stage 2 → Stage 3

- [ ] 서비스 도메인 분리 계획
- [ ] 각 마이크로서비스 프로젝트 생성
- [ ] nginx 리버스 프록시 설정
- [ ] SSL 인증서 설정
- [ ] 프론트엔드 빌드 및 배포
- [ ] 모니터링 및 로깅 설정

---

## 데스크톱 앱 확장

### Tauri 2.0 통합

현재 기본 설정 포함. 추가 개발 필요:

- [ ] Rust 커맨드 구현 (IPC)
- [ ] 파일 시스템 API 래퍼
- [ ] 시스템 다이얼로그 통합
- [ ] 자동 업데이트 설정
- [ ] 코드 서명

---

## 향후 계획

### 단기 (v1.x)
- [ ] Prisma Zod Generator 자동화
- [ ] 테스트 커버리지 확대
- [ ] E2E 테스트 추가

### 중기 (v2.x)
- [ ] Tauri 기능 완성
- [ ] 실시간 기능 (WebSocket)
- [ ] 파일 업로드

### 장기 (v3.x)
- [ ] 모노레포 구조
- [ ] CLI 도구
- [ ] 템플릿 생성기
